{"remainingRequest":"/home/runner/work/front-end/front-end/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/runner/work/front-end/front-end/src/components/buttons/UserFollowButton.vue?vue&type=style&index=0&id=8b538870&scoped=true&lang=css","dependencies":[{"path":"/home/runner/work/front-end/front-end/src/components/buttons/UserFollowButton.vue","mtime":1638848160319},{"path":"/home/runner/work/front-end/front-end/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/runner/work/front-end/front-end/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":499162500000},{"path":"/home/runner/work/front-end/front-end/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/runner/work/front-end/front-end/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/runner/work/front-end/front-end/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5mb2xsb3dlZCB7CiAgQGFwcGx5IGJnLW9ueXgtMjAwOwp9CgouYnRuLWZvbGxvdyB7CiAgQGFwcGx5IHdoaXRlc3BhY2Utbm93cmFwIGlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwbC0yIHByLTEgYm9yZGVyIGJvcmRlci10cmFuc3BhcmVudCBsZWFkaW5nLTYgZm9udC1tZWRpdW0gcm91bmRlZC1tZCB0cmFuc2l0aW9uLWFsbCBlYXNlLWluLW91dCBkdXJhdGlvbi0xNTA7Cn0K"},{"version":3,"sources":["/home/runner/work/front-end/front-end/src/components/buttons/UserFollowButton.vue"],"names":[],"mappings":";AAyHA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACR,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACpB;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACV,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC/K","file":"/home/runner/work/front-end/front-end/src/components/buttons/UserFollowButton.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"btn-follow btn-viridiant text-sm max-w-8 max-h-2\" @click=\"toggle()\"\n       :class=\"{'cursor-pointer':state !== 1, 'cursor-not-allowed': state === 1, 'followed': state === 2}\">\n    {{ text }}\n\n    <!-- Icon -->\n    <div ref=\"followIcon\" class=\"h-7 w-7\"></div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {User} from \"@/models\";\nimport {mapGetters} from 'vuex'\nimport lottie, {AnimationItem} from \"lottie-web\";\nimport {API} from '@/api';\n\nenum State {\n  ENABLED,\n  DISABLED,\n  FOLLOWED,\n  UNFOLLOWED\n}\n\nexport default defineComponent({\n  name: \"UserFollowButton.vue\",\n  props: {\n    user: {\n      type: Object as PropType<User>,\n      required: true\n    }\n  },\n  data() {\n    return {\n      state: State.DISABLED,\n      text: \"Unavailable\",\n      animation: undefined as unknown as AnimationItem,\n    }\n  },\n  mounted(): void {\n    this.animation = lottie.loadAnimation({\n      container: this.$refs['followIcon'] as Element,\n      renderer: 'svg',\n      loop: false,\n      autoplay: false,\n      path: '/lottie/plusToX.json'\n    });\n\n    if (this.isAuthenticated) {\n      this.state = State.ENABLED;\n      this.init();\n    }\n  },\n  methods: {\n    /**\n     * Follow the user.\n     */\n    follow(): void {\n      API.User.follow(this.user).then(response => {\n        switch (response.status) {\n          case 200:\n\n            this.state = State.FOLLOWED;\n            this.text = \"Unfollow\";\n            this.animation.setDirection(1);\n            this.animation.play();\n            break;\n          default:\n            break;\n        }\n      })\n    },\n    /**\n     * Unfollow the user.\n     */\n    unfollow(): void {\n      API.User.unfollow(this.user).then(response => {\n        switch (response.status) {\n          case 200:\n\n            this.state = State.UNFOLLOWED;\n            this.text = \"Follow\";\n            this.animation.setDirection(-1);\n            this.animation.play();\n            break;\n          default:\n            break;\n        }\n      })\n    },\n    /**\n     * Toggle the state.\n     */\n    toggle(): void {\n      if (this.state === State.FOLLOWED) this.unfollow();\n      else if (this.state === State.UNFOLLOWED) this.follow();\n    },\n    /**\n     * Init the state of the button\n     */\n    init(): void {\n      if (this.authenticatedUser?.followed_users.includes(this.user.id)) {\n        this.animation.goToAndStop(29, true);\n        this.state = State.FOLLOWED;\n        this.text = \"Unfollow\";\n      } else {\n        this.state = State.UNFOLLOWED;\n        this.text = \"Follow\";\n      }\n    }\n  },\n  computed: {\n    ...mapGetters({\n      authenticatedUser: 'user',\n      isAuthenticated: 'isAuthenticated'\n    })\n  }\n});\n</script>\n\n<style scoped>\n.followed {\n  @apply bg-onyx-200;\n}\n\n.btn-follow {\n  @apply whitespace-nowrap inline-flex items-center justify-center pl-2 pr-1 border border-transparent leading-6 font-medium rounded-md transition-all ease-in-out duration-150;\n}\n</style>"]}]}